<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>9)This en JS</title>
</head>

<body>
  <h1>57)This</h1>
  <script>
    /*
      this ahce referencia a windows que es el objeto global
    */
    console.log(this);
    console.log(window);
    console.log(this === window);
    this.nombre = "Contexto Global";
    console.log(this.nombre);
    function imprimir() {
      console.log(this.nombre);
    }
    imprimir();
    const obj = {
      nombre: "Contexto Objeto",
      imprimir: function () {
        console.log(this.nombre); //este this hace referencia al this del objeto obj y no del contexto global
      }
    }
    obj.imprimir();
    const obj2 = {
      nombre: "Contexto Objeto 2",
      imprimir //esta funcion es la de la linea  21 pero el this de esa funcion en vez de hacer referencia al windows ahce referencia al objeto obj2
    }
    obj2.imprimir();
    const obj3 = {
      nombre: "Contexto Objeto 3",
      imprimir: () => {            //La arrow funtion no maneja su propio scope por eso enlaza al contexto global
        console.log(this.nombre); //Esta arrow funtion mantiene un enlaze del contexto en el que ha sido creado por lo cual este this hace referencia al windows y no a obj3
      }
    }
    obj3.imprimir();
    function Persona(nombre) {
      const that = this;
      //this.nombre = nombre;
      that.nombre = nombre;
      //return console.log(this.nombre);
      //return function () {
      //console.log(this.nombre);
      //}
      //return () => console.log(this.nombre);
      return function () {
        console.log(that.nombre);
      }
    }
    let jon = new Persona("Jon");
    jon();
  </script>
</body>
